<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小日文 - 五十音快樂學</title>
    <!-- 引入可愛的圓體字型 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;900&family=Nunito:wght@400;700;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header id="game-header" class="hidden">
        <div style="display: flex; gap: 10px;">
            <button id="btn-home" class="btn btn-icon" title="回主選單">🏠</button>
            <button id="btn-volume" class="btn btn-icon" title="切換音量">🔊</button>
        </div>
        <div class="stats-container">
            <div class="stat-box timer-box">
                <span class="icon">⏱️</span>
                <span id="display-time">00:00</span>
            </div>
            <div class="stat-box score-box">
                <span class="icon">⭐</span>
                <span id="display-score">0</span>
            </div>
        </div>
    </header>

    <main id="app-container">
        <!-- 主選單畫面 -->
        <section id="screen-home" class="screen active">
            <div class="cover-image-container">
                <img src="cover.jpg" alt="Haikyuu TO THE TOP" class="cover-image">
            </div>
            <div class="title-container"
                style="display: flex; justify-content: center; align-items: center; gap: 1rem; margin-bottom: 2rem;">
                <h1 class="app-title" style="margin-bottom: 0;"><span class="subtitle">決戰五十音</span></h1>
                <button id="btn-show-chart" class="btn btn-chart" title="查看五十音表">あ/ア</button>
            </div>
            <div class="menu-container">
                <button class="btn btn-menu" data-target="screen-match-sound">
                    <span class="emoji">🎧</span> 讀音配對大考驗
                </button>
                <button class="btn btn-menu" data-target="screen-match-kana">
                    <span class="emoji">🔠</span> 平片假名連連看
                </button>
                <button class="btn btn-menu" data-target="screen-fill-blanks">
                    <span class="emoji">🧩</span> 五十音填空尋寶
                </button>
                <button class="btn btn-menu btn-secondary" data-target="screen-leaderboard">
                    <span class="emoji">🏆</span> 榮譽排行榜
                </button>
            </div>
        </section>

        <!-- 功能一：讀音對戰畫面 -->
        <section id="screen-match-sound" class="screen hidden">
            <h2 class="section-title">讀音對決</h2>

            <!-- 難度選擇區 -->
            <div class="difficulty-selector" id="sound-difficulty-selector">
                <p>請選擇比賽：</p>
                <button class="btn btn-diff sound-diff-btn" data-level="1">⭐ 預賽 (扇南) - 5秒</button>
                <button class="btn btn-diff sound-diff-btn" data-level="2">⭐⭐ 複賽 (和久谷南) - 4秒</button>
                <button class="btn btn-diff sound-diff-btn" data-level="3">⭐⭐⭐ 準決賽 (青葉城西) - 3秒</button>
                <button class="btn btn-diff sound-diff-btn" data-level="4">⭐⭐⭐⭐ 決賽 (白鳥澤) - 2秒</button>
            </div>

            <!-- 遊戲區 -->
            <div class="game-area hidden" id="game-area-sound">
                <div class="volleyball-court">
                    <!-- 電腦區 (上) -->
                    <div class="court-half opponent-half">
                        <div class="scoreboard opponent-board">
                            <div class="team-name" id="opponent-name">對手</div>
                            <div class="score-number" id="opponent-score-val">0</div>
                        </div>
                    </div>

                    <!-- 球網 / 題目區 (中) -->
                    <div class="net-area">
                        <div class="volley-hint" id="volley-hint"></div>
                        <!-- 排球題目移到更上方 (透過 CSS 調整) -->
                        <div class="volley-question" id="volley-question">?</div>
                        <div class="volley-message" id="volley-message">READY</div>
                    </div>

                    <!-- 玩家區 (下) -->
                    <div class="court-half player-half">
                        <div class="scoreboard player-board">
                            <div class="team-name">烏野高校</div>
                            <div class="score-number" id="player-score-val">0</div>
                        </div>
                    </div>

                    <!-- 時間條移到球場下方 -->
                    <div class="court-bottom-controls">
                        <div class="timer-bar-container bottom-timer">
                            <div class="timer-bar" id="volley-timer"></div>
                        </div>
                    </div>
                </div>

                <!-- 選項區 -->
                <div class="options-container" id="sound-options-container">
                    <!-- 選項由 JS 生成 -->
                </div>
            </div>
        </section>

        <!-- 功能二：平片假名配對畫面 -->
        <section id="screen-match-kana" class="screen hidden">
            <h2 class="section-title">平片假名對決</h2>

            <!-- 難度選擇區 -->
            <div class="difficulty-selector" id="kana-difficulty-selector">
                <p>請選擇比賽：</p>
                <button class="btn btn-diff kana-diff-btn" data-level="1">⭐ 預賽 (扇南) - 1字(5秒)</button>
                <button class="btn btn-diff kana-diff-btn" data-level="2">⭐⭐ 複賽 (和久谷南) - 2字(4秒)</button>
                <button class="btn btn-diff kana-diff-btn" data-level="3">⭐⭐⭐ 準決賽 (青葉城西) - 3字(3秒)</button>
                <button class="btn btn-diff kana-diff-btn" data-level="4">⭐⭐⭐⭐ 決賽 (白鳥澤) - 4字(2秒)</button>
            </div>

            <!-- 遊戲區 -->
            <div class="game-area hidden" id="game-area-kana">
                <div class="volleyball-court">
                    <!-- 電腦區 (上) -->
                    <div class="court-half opponent-half">
                        <div class="scoreboard opponent-board">
                            <div class="team-name" id="kana-opponent-name">對手</div>
                            <div class="score-number" id="kana-opponent-score-val">0</div>
                        </div>
                    </div>

                    <!-- 球網 / 題目區 (中) -->
                    <div class="net-area">
                        <div class="volley-hint" id="kana-volley-hint"></div>
                        <!-- 文字較長時會自動適應 -->
                        <div class="volley-question kana-question-display" id="kana-volley-question">?</div>
                        <div class="volley-message" id="kana-volley-message">READY</div>
                    </div>

                    <!-- 玩家區 (下) / 填答區 -->
                    <div class="court-half player-half">
                        <div class="scoreboard player-board">
                            <div class="team-name">烏野高校</div>
                            <div class="score-number" id="kana-player-score-val">0</div>
                        </div>
                        <div class="kana-input-area" id="kana-input-area">
                            <!-- JS 動態生成填寫框 -->
                        </div>
                    </div>

                    <!-- 時間條移到球場下方 -->
                    <div class="court-bottom-controls">
                        <div class="timer-bar-container bottom-timer">
                            <div class="timer-bar" id="kana-volley-timer"></div>
                        </div>
                    </div>
                </div>

                <!-- 選項區 -->
                <div class="options-container" id="kana-options-container">
                    <!-- 選項由 JS 生成 -->
                </div>
            </div>
        </section>

        <!-- 功能三：五十音填空畫面 -->
        <section id="screen-fill-blanks" class="screen hidden">
            <h2 class="section-title">五十音填空</h2>
            <div class="difficulty-selector" id="difficulty-selector">
                <p>請選擇難度：</p>
                <button class="btn btn-diff" data-level="easy">⭐ 簡單 (隱藏部分)</button>
                <button class="btn btn-diff" data-level="medium">⭐⭐ 中等 (隱藏一半)</button>
                <button class="btn btn-diff" data-level="hard">⭐⭐⭐ 挑戰 (完全空白)</button>
            </div>
            <div class="game-area hidden" id="game-area-blanks">
                <div class="blanks-header">
                    <div class="volley-message" id="blanks-message">READY</div>
                </div>
                <div class="gojuon-grid" id="gojuon-grid">
                    <!-- 表格由 JS 生成 -->
                </div>
                <!-- 選項與計時器區 -->
                <div class="blanks-bottom-fixed hidden" id="options-container">
                    <div class="options-row" id="options-buttons">
                        <!-- 選項按鈕由 JS 生成 -->
                    </div>
                    <div class="timer-bar-container blanks-timer-container">
                        <div class="timer-bar" id="blanks-timer"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 排行榜畫面 -->
        <section id="screen-leaderboard" class="screen hidden">
            <h2 class="section-title">榮譽排行榜</h2>
            <div class="leaderboard-tabs">
                <button class="tab-btn active" data-board="sound">讀音配對</button>
                <button class="tab-btn" data-board="kana">平片配對</button>
                <button class="tab-btn" data-board="blanks">填空挑戰</button>
            </div>
            <ul class="leaderboard-list" id="leaderboard-list">
                <!-- 排名由 JS 生成 -->
            </ul>
            <button class="btn btn-secondary mt-4" id="btn-back-home-lb">回主選單</button>
        </section>
    </main>

    <!-- 成功/單字展示彈窗 -->
    <div id="modal-overlay" class="hidden">
        <div id="word-card" class="word-card">
            <div class="card-image-container">
                <span class="card-emoji" id="word-emoji">🍎</span>
            </div>
            <div class="card-info">
                <div class="kana-large" id="word-kana">りんご</div>
                <div class="romaji" id="word-romaji">ringo</div>
                <div class="meaning" id="word-meaning">蘋果</div>
            </div>
            <button class="btn btn-primary mt-3" id="btn-next-word">繼續</button>
        </div>
    </div>

    <!-- 結算彈窗 -->
    <div id="result-modal" class="hidden">
        <div class="result-card">
            <h2>🎉 挑戰完成！ 🎉</h2>
            <div class="final-score">
                <span class="label">總分：</span>
                <span class="value" id="final-score-value">0</span>
            </div>
            <div class="final-time">
                <span class="label">時間：</span>
                <span class="value" id="final-time-value">00:00</span>
            </div>
            <div class="name-input-area mt-4">
                <label for="player-name">請輸入你的名字：</label>
                <input type="text" id="player-name" placeholder="小天才" maxlength="10">
                <button class="btn btn-primary" id="btn-save-score">儲存成績</button>
            </div>
        </div>
    </div>

    <!-- 擲硬幣彈窗 -->
    <div id="coin-modal" class="hidden">
        <div class="result-card coin-card">
            <h2>選邊發球</h2>
            <p>請選擇硬幣正反面來決定發球權！</p>
            <div class="coin-container" id="coin-container">
                <div class="coin" id="coin-element">
                    <div class="coin-face coin-front">藍色</div>
                    <div class="coin-face coin-back">黃色</div>
                </div>
            </div>
            <div class="coin-choice-area mt-3" id="coin-choice-area">
                <button class="btn btn-primary coin-btn" data-choice="front">選擇 藍色</button>
                <button class="btn btn-warning coin-btn" data-choice="back">選擇 黃色</button>
            </div>
            <div class="coin-result-area mt-3 hidden" id="coin-result-area">
                <p id="coin-result-text" class="mb-3">你猜對了！請選擇：</p>
                <button class="btn btn-primary action-btn" data-action="serve">先攻 (發球)</button>
                <button class="btn btn-success action-btn" data-action="receive">先守 (接球)</button>
            </div>
        </div>
    </div>

    <!-- 五十音表彈窗 -->
    <div id="chart-modal" class="hidden chart-modal-overlay">
        <div class="chart-card">
            <button id="btn-close-chart" class="btn btn-icon close-btn" title="關閉">❌</button>
            <h2 class="section-title" style="margin-top: 0;">五十音表</h2>
            <div class="chart-controls">
                <button class="btn btn-toggle active" data-toggle="hiragana">平假名</button>
                <button class="btn btn-toggle active" data-toggle="katakana">片假名</button>
                <button class="btn btn-toggle active" data-toggle="romaji">讀音</button>
            </div>
            <div class="chart-grid-container">
                <div class="chart-grid" id="chart-grid">
                    <!-- 表格由 JS 生成 -->
                </div>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>

</html>